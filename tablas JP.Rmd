---
title: "Encuesta a Hogares en torno al acceso a la Salud, la Educación y el Trabajo"
subtitle: "Análisis descriptivo de las variables seleccionadas"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE,
                      warning = FALSE, message = FALSE)
```

```{r, include=F, echo=F}
rm(list=ls())
library(dplyr)
library(tidyverse)
library(kableExtra)

load("datos_depurados.Rda")
nomenclador = read.csv("nomenclador2.csv", sep = ";")
# Acá seleccionar las columnas a tabular
datos = datos[,138:145]
names(datos)
nomenclador = subset(nomenclador, Variable %in% names(datos))

```

# Nomenclador de las variables descriptas  

Tenemos que trabajar un poco en este nomenclador, en la descripción de las variables y unificando criterios en los valores (0 y 1, sí y no, etc).  

```{r, echo=F, include=T, message=F, warning=F}
kable(nomenclador, format = "markdown")
```

```{r}
x <- list()
n = as.numeric(ncol(datos))
# i = 3
for(i in 1:n){
freq = datos %>% 
  group_by(datos[,i]) %>% 
  summarise(casos = n(),
            freq  = paste(round((casos / nrow(datos))*100, 2), "%")) %>% 
  as.data.frame()
names(freq)[1]<- "Valores"
assign(paste0("freq",i), freq)
x[[paste("Tabla de frecuencias relativas de la variable",colnames(datos[,i]))]] <- get(paste0("freq",i))
}
```

```{r}
n = as.numeric(ncol(datos))
plots <- list()
for(i in 1:n){
freq = datos %>% 
  group_by(datos[,i]) %>% 
  summarise(casos = n(),
            freq  = casos / nrow(datos)) %>% 
  as.data.frame()
p = ggplot(data=freq , aes_string(x = names(freq)[1], y = "freq")) +
  geom_bar(stat="identity", width = 0.5, fill="#5AAA9E") +
  geom_text(aes(label=paste(round(freq,2)*100, "%")), vjust=1.5, color="#F6F6F6", size=3.5) +
  scale_y_continuous(labels = scales::percent)
assign(paste0("plot",i), p)
plots[[paste0("plot",i)]] <- get(paste0("plot",i))
}
```

<br></br>

# Tablas de frecuencias de las variables seleccionadas  

```{r}
pander::pander(x)
```


<br></br>

# Tablas de contingencia (cruces de información) de las variables seleccionadas  

Tenemos que definir cuáles...

<br></br>

# Análisis gráfico de las variables seleccionadas  

```{r, include = TRUE, message=FALSE, echo=FALSE, warning = FALSE, fig.width=3, fig.height=2,  results='hide'}
print(plots)
```

