---
title: "Composición de los hogares"
output: pdf_document
header-includes:
    \renewcommand{\tablename}{Tabla}

---

```{r setup, include=FALSE,echo = FALSE, warning = FALSE, message = FALSE}
library(kableExtra)
library(tidyr)
library(dplyr)
library(ggplot2)
knitr::opts_chunk$set(echo = FALSE)
```


```{r echo=F, message=FALSE, warning=FALSE, include=F}
rm(list=ls())
library(reshape2)
library(kableExtra)
library(tidyverse)
library(tidyselect)
datos_jp = read.table("datos_tablas.txt", header = T, sep = "\t")
datos_jp$X = NULL
```



```{r message=FALSE, warning=FALSE}
load("G:/Mi unidad/proyecto_FCS_diciembre_2020/resultados/datos.Rda")
datos$nse<-as.factor(datos$`Nivel Socio Económico`)

datos$nse<-factor(datos$nse, levels=c("01. Alto", "02. Medio alto", "03.Medio",
                                    "0.4 Medio Bajo", "0.5  Bajo"))
levels(datos$nse)<-c("Alto", "Medio alto", "Medio",
                    "Medio Bajo", "Bajo")


datos$`Cuántas son menores de 14 años?`[
  is.na(datos$`Cuántas son menores de 14 años?`)==TRUE]<-0

datos$`Cuántas tienen más de 60 años?`[
  is.na(datos$`Cuántas tienen más de 60 años?`)==TRUE]<-0



datos$hogar_mas4<-
  ifelse(
    datos$`Cuántas personas viven en esa casa?`>4, 1, 0)

datos$hogar_con_menores<-
  ifelse(datos$`Cuántas son menores de 14 años?`==0, 0, 1
  )

datos$hogar_con_mayores<-
  ifelse(datos$`Cuántas tienen más de 60 años?`==0, 0, 1
  )


datos$composicion<-
  datos$hogar_con_mayores+10*datos$hogar_con_menores+100*datos$hogar_mas4
datos$composicion<-
  as.factor(datos$composicion)
levels(datos$composicion)<-
  c(
    "menos de 5, sin menores, sin mayores", "menos de 5, sin menores, con mayores",
    "menos de 5, con menores, sin mayores", "menos de 5, con menores, con mayores",
    "5 o más, sin menores, sin mayores", "5 o más, sin menores, con mayores", 
    "5 o más, con menores, sin mayores", "5 o más, con menores, con mayores")

```


```{r}
kable_styling(kable(100*round(addmargins(prop.table(addmargins(table(datos$composicion, datos$nse),2),2),1),3), caption = "Composición de los hogares por cantidad de integrantes y grupos de edades (porcentajes por NSE)"), latex_options = "HOLD_position")

kable_styling(kable(addmargins(table(datos$composicion, datos$nse)), caption = "Composición de los hogares por cantidad de integrantes y grupos de edades según NSE (absolutos)"), latex_options = "HOLD_position")

```

con menores = hay en el hogar al menos una persona menor de 14 años  
con mayores = hay en el hogar al menos una persona mayor de 60 años  